<!DOCTYPE html>
<html lang="si">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Worksheet Calculator</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap');

        :root {
            --bg: #000;
            --card: #111;
            --yellow: #ffcc00;
            --text: #fff;
            --gray: #888;
            --border: #222;
            --input-bg: #1a1a1a;
            --input-border: #333;
            --bar-bg: #222;
            --btn-text: #000;
            --q-btn-text: #ffcc00;
        }

        [data-theme="light"] {
            --bg: #ffffff;
            --card: #f5f5f7;
            --yellow: #ffcc00;
            --text: #000;
            --gray: #666;
            --border: #ddd;
            --input-bg: #fff;
            --input-border: #ccc;
            --bar-bg: #e0e0e0;
            --btn-text: #000;
            --q-btn-text: #000000;
        }

        body {
            background-color: var(--bg);
            color: var(--text);
            font-family: 'Inter', sans-serif;
            margin: 0;
            padding-bottom: 30px;
            transition: 0.3s ease;
        }

        /* --- UI Styles --- */
        .mode-toggle { display: flex; justify-content: flex-end; padding: 20px 25px 0 0; }
        .bulb-btn { background: none; border: none; cursor: pointer; font-size: 32px; outline: none; transition: 0.2s; }
        .bulb-btn:active { transform: scale(0.9); }

        .bulb-off { display: block; filter: grayscale(1); opacity: 0.5; }
        .bulb-on { display: none; filter: drop-shadow(0 0 10px var(--yellow)); }

        [data-theme="light"] .bulb-off { display: none; }
        [data-theme="light"] .bulb-on { display: block; }

        header { padding: 10px 20px 30px 20px; text-align: center; }
        .title { font-size: 2.8rem; font-weight: 900; line-height: 1.1; letter-spacing: -2px; margin: 0; text-transform: uppercase; }
        .yellow-text { color: var(--yellow); display: block; }

        .container { max-width: 900px; margin: auto; padding: 0 15px; display: grid; gap: 20px; }
        .card { background: var(--card); border: 1px solid var(--border); border-radius: 20px; padding: 25px; transition: 0.3s; }
        h2 { font-size: 1rem; color: var(--gray); text-transform: uppercase; margin-bottom: 20px; }

        .input-box {
            background: var(--input-bg); border: 1px solid var(--input-border);
            padding: 12px; border-radius: 12px; color: var(--text);
            width: 100%; margin-bottom: 15px; box-sizing: border-box;
        }

        .q-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; margin-bottom: 15px; }
        .q-btn {
            background: var(--bar-bg); border: 1px solid var(--input-border);
            color: var(--q-btn-text); padding: 10px; border-radius: 10px; cursor: pointer; font-weight: bold;
        }
        .q-btn:hover { background: var(--yellow); color: #000; }

        .btn-main {
            background: var(--yellow); color: var(--btn-text); border: none;
            padding: 15px; border-radius: 12px; width: 100%;
            font-weight: 900; cursor: pointer; text-transform: uppercase;
        }

        .btn-undo {
            background: transparent; color: #ff4444; border: 1px solid var(--input-border);
            margin-top: 10px; padding: 8px; width: 100%; border-radius: 10px; cursor: pointer;
        }

        .stat-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin-bottom: 30px; }
        .stat-box { background: var(--input-bg); padding: 15px; border-radius: 15px; text-align: center; border: 1px solid var(--border); }
        .stat-val { font-size: 1.4rem; font-weight: 800; color: var(--yellow); display: block; }
        .stat-lbl { font-size: 0.7rem; color: var(--gray); }

        .row { margin-bottom: 15px; }
        .info { display: flex; justify-content: space-between; margin-bottom: 5px; font-size: 0.9rem; }
        .bar { height: 8px; background: var(--bar-bg); border-radius: 10px; overflow: hidden; }
        .fill { height: 100%; background: var(--yellow); width: 0%; transition: 0.5s; }

        /* --- Countdown New Styles --- */
        .countdown-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; margin-top: 15px; }
        .c-box { background: var(--bar-bg); padding: 10px; border-radius: 12px; text-align: center; border: 1px solid var(--input-border); }
        .c-val { font-size: 1.5rem; font-weight: 900; color: var(--yellow); display: block; }
        .c-lbl { font-size: 0.6rem; color: var(--gray); font-weight: bold; }

    </style>
</head>
<body>

    <div class="mode-toggle">
        <button class="bulb-btn" onclick="toggleMode()">
            <span class="bulb-off">üí°</span>
            <span class="bulb-on">üí°</span>
        </button>
    </div>

    <header>
        <div class="title">WORKSHEET <span class="yellow-text">CALCULATOR</span></div>
    </header>

    <div class="container">
        <div class="card">
            <h2>‡∂¥‡∑ä‚Äç‡∂ª‡∂∏‡∑í‡∂≠ ‡∂ö‡∑è‡∂Ω‡∂∫ (Standard)</h2>
            <div style="display: flex; gap: 10px;">
                <input type="time" id="stdFrom" class="input-box">
                <input type="time" id="stdTo" class="input-box">
            </div>
            <button class="btn-main" onclick="addStandard()">Range ‡∂ë‡∂ö ‡∂ë‡∂ö‡∑ä‡∂ö‡∂ª‡∂±‡∑ä‡∂±</button>
        </div>

        <div class="card">
            <h2>‡∑Ä‡∑í‡∑Ç‡∂∫‡∂±‡∑ä ‡∑É‡∑Ñ ‡∂ö‡∑è‡∂Ω‡∂∫</h2>
            <select id="subName" class="input-box">
                <option value="Accounting">Accounting</option>
                <option value="Business Studies">Business Studies</option>
                <option value="ICT/Econ">ICT/Econ</option>
            </select>

            <div class="q-grid">
                <button class="q-btn" onclick="q(60)">1h</button>
                <button class="q-btn" onclick="q(120)">2h</button>
                <button class="q-btn" onclick="q(180)">3h</button>
                <button class="q-btn" onclick="q(5)">5m</button>
                <button class="q-btn" onclick="q(10)">10m</button>
                <button class="q-btn" onclick="q(15)">15m</button>
                <button class="q-btn" onclick="q(20)">20m</button>
                <button class="q-btn" onclick="q(30)">30m</button>
            </div>

            <div style="display: flex; gap: 10px;">
                <input type="number" id="h" placeholder="‡∂¥‡∑ê‡∂∫" class="input-box">
                <input type="number" id="m" placeholder="‡∑Ä‡∑í‡∂±‡∑è‡∂©‡∑í" class="input-box">
            </div>
            <button class="btn-main" onclick="addSubject()">Session ‡∂ë‡∂ö ‡∂á‡∂≠‡∑î‡∑Ö‡∂≠‡∑ä ‡∂ö‡∂ª‡∂±‡∑ä‡∂±</button>
            <button class="btn-undo" onclick="undo()">‡∂Ö‡∂±‡∑ä‡∂≠‡∑í‡∂∏ ‡∂ë‡∂ö ‡∂â‡∑Ä‡∂≠‡∑ä ‡∂ö‡∂ª‡∂±‡∑ä‡∂± (Undo)</button>
        </div>

        <div class="card">
            <h2>‡∑É‡∑è‡∂ª‡∑è‡∂Ç‡∑Å‡∂∫ (Analysis)</h2>
            <div class="stat-grid">
                <div class="stat-box">
                    <span class="stat-lbl">‡∂¥‡∑ä‚Äç‡∂ª‡∂∏‡∑í‡∂≠ ‡∂ö‡∑è‡∂Ω‡∂∫</span>
                    <span class="stat-val" id="tStd">0h 0m</span>
                </div>
                <div class="stat-box">
                    <span class="stat-lbl">‡∑É‡∂≠‡∑ä‚Äç‡∂∫ ‡∂ö‡∑è‡∂Ω‡∂∫</span>
                    <span class="stat-val" id="tAct">0h 0m</span>
                </div>
                <div class="stat-box">
                    <span class="stat-lbl">‡∂Ö‡∂ö‡∑ä‚Äç‡∂ª‡∑í‡∂∫ ‡∂ö‡∑è‡∂Ω‡∂∫</span>
                    <span class="stat-val" id="tIdl" style="color: #ff4444;">0h 0m</span>
                </div>
            </div>

            <div class="row">
                <div class="info"><span>Accounting</span><span id="txtAcc">0h 0m</span></div>
                <div class="bar"><div id="barAcc" class="fill"></div></div>
            </div>
            <div class="row">
                <div class="info"><span>Business Studies</span><span id="txtBS">0h 0m</span></div>
                <div class="bar"><div id="barBS" class="fill"></div></div>
            </div>
            <div class="row">
                <div class="info"><span>ICT / Econ</span><span id="txtICT">0h 0m</span></div>
                <div class="bar"><div id="barICT" class="fill"></div></div>
            </div>

            <button class="btn-undo" style="border:none; color:#555; margin-top:20px;" onclick="resetAll()">RESET ALL</button>
        </div>

        <div class="card" style="border-color: var(--yellow);">
            <h2 style="color: var(--yellow);">2026 A/L COUNTDOWN</h2>
            <div class="countdown-grid">
                <div class="c-box"><span class="c-val" id="cd-d">00</span><span class="c-lbl">DAYS</span></div>
                <div class="c-box"><span class="c-val" id="cd-h">00</span><span class="c-lbl">HOURS</span></div>
                <div class="c-box"><span class="c-val" id="cd-m">00</span><span class="c-lbl">MINS</span></div>
                <div class="c-box"><span class="c-val" id="cd-s">00</span><span class="c-lbl">SECS</span></div>
            </div>
            <p style="text-align: center; font-size: 0.7rem; color: var(--gray); margin-top: 15px;">TARGET DATE: 2026-08-01</p>
        </div>
    </div>

    <script>
        function toggleMode() {
            const root = document.documentElement;
            const currentTheme = root.getAttribute('data-theme');
            root.setAttribute('data-theme', currentTheme === 'light' ? 'dark' : 'light');
        }

        let totalStd = 0;
        let subjects = { "Accounting": 0, "Business Studies": 0, "ICT/Econ": 0 };
        let history = [];

        function q(mins) {
            let ch = parseInt(document.getElementById('h').value || 0);
            let cm = parseInt(document.getElementById('m').value || 0);
            let tot = (ch * 60) + cm + mins;
            document.getElementById('h').value = Math.floor(tot / 60) || '';
            document.getElementById('m').value = tot % 60 || '';
        }

        function addStandard() {
            const f = document.getElementById('stdFrom').value;
            const t = document.getElementById('stdTo').value;
            if(!f || !t) return;
            let d = (new Date(`2026-01-01T${t}`) - new Date(`2026-01-01T${f}`)) / 60000;
            if(d < 0) d += 1440;
            totalStd += d;
            up();
        }

        function addSubject() {
            const name = document.getElementById('subName').value;
            const hr = parseInt(document.getElementById('h').value || 0);
            const mi = parseInt(document.getElementById('m').value || 0);
            const total = (hr * 60) + mi;
            if(total <= 0) return;
            subjects[name] += total;
            history.push({ name, total });
            document.getElementById('h').value = '';
            document.getElementById('m').value = '';
            up();
        }

        function undo() {
            if(history.length === 0) return;
            const last = history.pop();
            subjects[last.name] -= last.total;
            up();
        }

        function fmt(mins) {
            const h = Math.floor(Math.abs(mins) / 60);
            const m = Math.floor(Math.abs(mins) % 60);
            return `${mins < 0 ? '-' : ''}${h}h ${m}m`;
        }

        function up() {
            document.getElementById('tStd').innerText = fmt(totalStd);
            let act = subjects["Accounting"] + subjects["Business Studies"] + subjects["ICT/Econ"];
            document.getElementById('tAct').innerText = fmt(act);
            document.getElementById('tIdl').innerText = fmt(totalStd - act);

            const map = { "Accounting": "Acc", "Business Studies": "BS", "ICT/Econ": "ICT" };
            for(let s in subjects) {
                document.getElementById(`txt${map[s]}`).innerText = fmt(subjects[s]);
                let p = totalStd > 0 ? (subjects[s] / totalStd) * 100 : 0;
                document.getElementById(`bar${map[s]}`).style.width = Math.min(p, 100) + "%";
            }
        }

        function resetAll() { if(confirm("‡∂∏‡∂ö‡∂±‡∑ä‡∂±‡∂Ø?")) { totalStd = 0; subjects = { "Accounting": 0, "Business Studies": 0, "ICT/Econ": 0 }; history = []; up(); } }

        // --- Countdown Logic ---
        function updateCD() {
            const target = new Date("August 1, 2026 00:00:00").getTime();
            const now = new Date().getTime();
            const diff = target - now;

            const d = Math.floor(diff / (1000 * 60 * 60 * 24));
            const h = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const m = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            const s = Math.floor((diff % (1000 * 60)) / 1000);

            document.getElementById('cd-d').innerText = d.toString().padStart(2, '0');
            document.getElementById('cd-h').innerText = h.toString().padStart(2, '0');
            document.getElementById('cd-m').innerText = m.toString().padStart(2, '0');
            document.getElementById('cd-s').innerText = s.toString().padStart(2, '0');
        }
        setInterval(updateCD, 1000);
        updateCD();
    </script>
</body>
</html>
